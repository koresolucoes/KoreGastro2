# ChefOS - Sistema de Gest√£o para Restaurantes

**ChefOS** √© uma plataforma de gest√£o para restaurantes completa, moderna e integrada. Desenvolvido com as tecnologias mais recentes, ele oferece uma solu√ß√£o completa para otimizar opera√ß√µes, desde o atendimento ao cliente no Ponto de Venda (PDV) at√© o controle de estoque, gest√£o de RH, reservas e an√°lise de desempenho, tudo sincronizado em tempo real.

O sistema foi projetado para ser intuitivo, eficiente e poderoso, incorporando intelig√™ncia artificial para auxiliar em tarefas complexas como a cria√ß√£o de fichas t√©cnicas e a previs√£o de compras.

---

## üöÄ Acesso e Instala√ß√£o

ChefOS √© uma plataforma de gest√£o completa, com vers√µes dispon√≠veis para **Web**, **Windows** e **Android**, garantindo que voc√™ possa gerenciar seu neg√≥cio de qualquer lugar.

Para come√ßar a usar, testar o sistema ou baixar os aplicativos, acesse nosso site oficial:

**[https://chefos.koresolucoes.com.br](https://chefos.koresolucoes.com.br)**

### Como Come√ßar:

- **Cadastro Gratuito:** O registro na plataforma √© totalmente gratuito e permite que voc√™ explore as funcionalidades do sistema.
- **Planos Dispon√≠veis:** Para utilizar todos os recursos de forma cont√≠nua e gerenciar seu restaurante, √© necess√°rio assinar um dos nossos planos flex√≠veis. Confira os detalhes no site.
- **Seja um Beta Tester:** Quer ter acesso antecipado √†s novas funcionalidades e nos ajudar a moldar o futuro do ChefOS? Inscreva-se em nosso programa de beta testers atrav√©s do site!
- **Download dos Aplicativos:** Encontre os links para download das vers√µes para desktop (Windows) e mobile (Android) diretamente na nossa p√°gina oficial.

---

## ‚ú® Funcionalidades Principais

O ChefOS √© modular e cobre todas as √°reas cr√≠ticas da gest√£o de um restaurante:

### üìä **Dashboard Anal√≠tico**
- **Vis√£o Geral em Tempo Real:** Acompanhe os principais indicadores de desempenho (KPIs) do dia assim que voc√™ entra no sistema.
- **M√©tricas Financeiras Chave:** Vendas totais, **Lucro Bruto**, **Ticket M√©dio**, mesas ocupadas, contagem de itens com estoque baixo e pedidos pendentes na cozinha.
- **Gr√°fico de Vendas vs. CMV:** An√°lise visual do faturamento contra o custo dos produtos vendidos nos √∫ltimos 7 ou 30 dias.
- **An√°lises R√°pidas:** Rankings com os itens mais vendidos do dia, incluindo a **margem de lucro** individual de cada um, e uma lista das transa√ß√µes de venda mais recentes.

### üçΩÔ∏è **PDV (Ponto de Venda)**
- **Gerenciamento Visual de Mesas:** Crie m√∫ltiplos sal√µes e organize as mesas com uma interface de arrastar e soltar (drag-and-drop).
- **Editor de Layout Completo:** No modo de edi√ß√£o, adicione, delete, redimensione e altere o n√∫mero das mesas para espelhar perfeitamente o layout do seu sal√£o.
- **Lan√ßamento de Pedidos:** Uma interface r√°pida e intuitiva para gar√ßons lan√ßarem pedidos diretamente na mesa a partir de um menu categorizado e com busca.
- **Status em Tempo Real:** As cores das mesas mudam instantaneamente (`Livre`, `Ocupada`, `Pagando`), mantendo toda a equipe sincronizada.
- **Associa√ß√£o de Clientes:** Vincule um cliente do seu cadastro a uma mesa para registrar o hist√≥rico de consumo e habilitar o resgate de pr√™mios de fidelidade.
- **A√ß√µes R√°pidas:** Imprima pr√©-contas, mova pedidos entre mesas e aplique descontos diretamente no painel do pedido.

### üç≥ **KDS (Kitchen Display System)**
- **Comandas Digitais:** Substitua as comandas de papel por um sistema digital eficiente que envia pedidos diretamente para as esta√ß√µes corretas (Cozinha, Bar, etc.).
- **Timers Inteligentes:** Cada item e pedido possui um timer de preparo, com cores que indicam o andamento e alertam sobre atrasos.
- **Alertas Sonoros:** Notifica√ß√µes aud√≠veis para novos pedidos, itens atrasados e, mais importante, **alertas de aten√ß√£o** para itens com observa√ß√µes cr√≠ticas (como alergias).
- **Fluxo de Seguran√ßa:** Itens com observa√ß√µes cr√≠ticas exigem um passo de "confirma√ß√£o de ci√™ncia" pela cozinha, garantindo que a informa√ß√£o foi lida.
- **L√≥gica de Reten√ß√£o (Hold):** O sistema calcula o tempo de preparo de cada item e segura os pratos mais r√°pidos para que tudo fique pronto ao mesmo tempo.
- **Modo "Expo":** Uma tela centralizada para o chef ou expedidor visualizar todos os itens prontos e garantir que os pedidos saiam completos e no tempo certo.

### üõµ **Integra√ß√£o com iFood**
#### KDS para iFood
- **Webhook Bidirecional:** Receba pedidos do iFood diretamente no sistema e mantenha os status sincronizados em tempo real. O sistema captura eventos de novos pedidos, confirma√ß√µes, despachos, prontos para retirada, conclus√µes e cancelamentos.
- **Gest√£o de Status Completa:** Confirme, inicie o preparo, despache para entrega ou marque como pronto para retirada, tudo dentro do ChefOS. As atualiza√ß√µes s√£o enviadas automaticamente para o iFood.
- **Tratamento de Cancelamentos:** Gerencie cancelamentos de pedidos (iniciados pelo cliente ou pelo restaurante) de forma integrada.
- **KDS Dedicado:** Uma tela de KDS otimizada para a opera√ß√£o de delivery, mostrando informa√ß√µes cruciais como ID do pedido iFood, tipo (entrega/retirada) e endere√ßo do cliente.
- **Visualizador de Logs:** Uma ferramenta para depura√ß√£o que exibe todos os eventos recebidos do webhook do iFood, ajudando a diagnosticar problemas de comunica√ß√£o.

#### Card√°pio iFood
- **Sincroniza√ß√£o Inteligente:** Sincronize itens do seu card√°pio ChefOS com o iFood. O sistema identifica itens j√° sincronizados, modificados ou que ainda n√£o foram enviados.
- **Requisito de C√≥digo Externo:** Apenas itens com um "C√≥digo Externo" (SKU) definido na Ficha T√©cnica podem ser sincronizados, garantindo uma integra√ß√£o robusta.
- **Vis√£o "Ao Vivo" do Card√°pio:** Uma aba exclusiva que busca e exibe seu card√°pio *exatamente* como ele est√° no iFood, mostrando categorias, itens, imagens e pre√ßos.
- **A√ß√µes R√°pidas:** Altere o **pre√ßo** e a **disponibilidade** de um item diretamente na vis√£o "ao vivo", e a altera√ß√£o √© enviada imediatamente para o iFood.
- **Cria√ß√£o de Categorias:** Crie novas categorias no seu card√°pio do iFood diretamente pelo ChefOS.

### üí∞ **Caixa (Cashier)**
- **Fila de Pagamento:** Visualize todas as mesas que est√£o aguardando para pagar em uma tela dedicada.
- **Venda R√°pida:** Um PDV simplificado para vendas no balc√£o. Os pedidos podem ser pagos na hora ou enviados para a cozinha para pagamento posterior.
- **Fechamento de Conta Completo:** Processe pagamentos de mesas e vendas r√°pidas. Suporta **m√∫ltiplos m√©todos de pagamento** para dividir a conta.
- **Gest√£o de Caixa:** Registre despesas, confira o saldo e realize o fechamento de caixa detalhado, que compara o valor esperado com o contado e gera um resumo para impress√£o.
- **Reimpress√£o:** Acesse o hist√≥rico de vendas do dia para reimprimir recibos ou conferir detalhes de um pedido.

### üì¶ **Estoque e Compras**
- **Controle de Insumos:** Gerencie todos os seus ingredientes, custos, unidades, fornecedores e categorias.
- **Alertas Automatizados:** O dashboard sinaliza itens com estoque baixo, pr√≥ximos ao vencimento ou parados h√° muito tempo.
- **Controle de Lotes:** Registre n√∫meros de lote e datas de validade para insumos recebidos, garantindo total rastreabilidade.
- **Contagem de Estoque (Auditoria):** Uma tela dedicada para realizar a contagem f√≠sica do invent√°rio. O sistema mostra a diferen√ßa entre o estoque contado e o do sistema e permite ajustar tudo com um √∫nico clique.
- **Previs√£o com IA (Gemini):** Utilize o hist√≥rico de vendas para prever a necessidade de compra de insumos para a pr√≥xima semana.
- **Ordens de Compra:** Crie, gerencie e receba ordens de compra. A IA pode gerar uma ordem de compra sugerida automaticamente. Ao receber um pedido, o sistema atualiza o estoque e tamb√©m o **custo m√©dio** do insumo.

### üìã **Fichas T√©cnicas**
- **Custeio Preciso de Pratos (CMV):** Saiba exatamente quanto custa cada item do seu menu. Associe ingredientes e sub-receitas para ter um c√°lculo de CMV em tempo real e garantir sua margem de lucro.
- **Baixa Autom√°tica de Estoque:** Ao vender um prato, o sistema deduz automaticamente os ingredientes do estoque com base na ficha t√©cnica.
- **Vincular Sub-receitas ao Estoque:** Transforme uma sub-receita (ex: "Molho de Tomate") em um item de estoque control√°vel, permitindo a gest√£o da produ√ß√£o intermedi√°ria.
- **Otimiza√ß√£o com IA (Gemini):** Descreva um prato e deixe a IA gerar uma sugest√£o de ficha t√©cnica. Para receitas j√° prontas, a IA pode fornecer **dicas de otimiza√ß√£o de mise en place** para agilizar o preparo.

### üî™ **Mise en Place**
- **Planejamento de Produ√ß√£o:** Crie quadros de tarefas di√°rios para a prepara√ß√£o de sub-receitas e tarefas personalizadas (ex: "Limpar c√¢mara fria").
- **Atribui√ß√£o e Acompanhamento:** Atribua tarefas para funcion√°rios e esta√ß√µes espec√≠ficas e acompanhe o progresso em tempo real (A Fazer, Em Preparo, Conclu√≠do).
- **Integra√ß√£o com Estoque:** Ao concluir uma tarefa de produ√ß√£o, o sistema gera um **n√∫mero de lote** para rastreabilidade, calcula o **custo total da produ√ß√£o** e d√° baixa nos insumos, adicionando o item final (a sub-receita produzida) ao estoque.
- **Acesso R√°pido:** Visualize a ficha t√©cnica completa diretamente do card da tarefa, sem precisar sair da tela.

### üìÖ **Reservas**
- **Configura√ß√£o Flex√≠vel:** Defina seus hor√°rios de funcionamento para cada dia da semana, dura√ß√£o padr√£o da reserva, capacidade de pessoas por mesa e anteced√™ncia m√°xima.
- **Gest√£o Interna:** Cadastre e gerencie reservas diretamente no sistema, com vis√£o di√°ria ou uma vis√£o geral dos pr√≥ximos 15 dias.
- **P√°gina P√∫blica de Reservas:** Ative uma p√°gina p√∫blica onde seus clientes podem fazer reservas online 24/7, respeitando suas regras e capacidade.

### üë• **Recursos Humanos (RH)**
- **Cadastro Completo de Funcion√°rios:** Gerencie informa√ß√µes pessoais, de contato, contratuais, de pagamento e banc√°rias de toda a equipe.
- **Escalas de Trabalho:** Crie e publique escalas de trabalho semanais. Apenas escalas publicadas s√£o vis√≠veis para n√£o-gerentes.
- **Controle de Ponto:** Monitore e realize ajustes manuais nos registros de entrada, sa√≠da e pausas dos funcion√°rios. O registro em si √© feito pelo funcion√°rio logado.
- **Gest√£o de Aus√™ncias:** Aprove ou rejeite solicita√ß√µes de f√©rias e folgas. Os funcion√°rios t√™m uma tela para solicitar e acompanhar suas pr√≥prias aus√™ncias.
- **Folha de Pagamento:** Calcule uma pr√©via da folha de pagamento com base nas horas trabalhadas, considerando **horas extras com base em limites di√°rios e semanais**, e gere **contracheques (holerites)** detalhados e prontos para impress√£o.

### üíñ **CRM e Fidelidade**
- **Cadastro de Clientes:** Base de dados completa de clientes com hist√≥rico de consumo, pontos de fidelidade e observa√ß√µes.
- **Vis√£o 360¬∞ do Cliente:** Visualize o hist√≥rico completo de consumo e de pontos de fidelidade em uma tela detalhada.
- **Programa de Fidelidade:** Configure um sistema de pontos por valor gasto e crie recompensas flex√≠veis: **desconto fixo (R$), desconto percentual (%) ou um item gr√°tis** do seu card√°pio.
- **Resgate no PDV:** Permita que os clientes resgatem suas recompensas diretamente ao fazer um novo pedido na mesa ou no caixa.

### üöÄ **Performance e Relat√≥rios**
- **Relat√≥rios Financeiros Completos:** Gere relat√≥rios detalhados com Faturamento, Custo (CMV), Lucro Bruto e Resultado L√≠quido.
- **An√°lise Comparativa:** Compare o desempenho de vendas entre diferentes per√≠odos para identificar tend√™ncias.
- **An√°lise de Hor√°rios de Pico:** Visualize graficamente os hor√°rios e dias da semana com maior volume de vendas para otimizar sua opera√ß√£o.
- **An√°lise de Desempenho por Prato:** Descubra quais s√£o seus pratos mais lucrativos com relat√≥rios que incluem receita, custo, lucro total e margem de lucro por item.
- **Construtor de Relat√≥rios:** Crie relat√≥rios personalizados selecionando colunas, filtros e agrupamentos para extrair os dados exatos que voc√™ precisa.
- **Desempenho da Equipe:** Monitore as vendas, gorjetas e ticket m√©dio de cada funcion√°rio, al√©m da produtividade da cozinha por tarefas conclu√≠das e tempo de preparo.

### ‚öôÔ∏è **Configura√ß√µes e Card√°pio Online**
- **Gest√£o Centralizada:** Cadastre funcion√°rios, esta√ß√µes de produ√ß√£o, fornecedores, categorias de ingredientes, categorias de pratos (com imagem) e os dados da sua empresa (com logo).
- **Cargos e Permiss√µes:** Crie cargos personalizados (ex: Gar√ßom, Caixa) e defina quais telas cada cargo pode acessar, garantindo seguran√ßa e controle.
- **Card√°pio Online:** O sistema gera automaticamente um **QR Code** e um link para um card√°pio online p√∫blico e elegante, que inclui uma p√°gina de capa, o menu e uma p√°gina de informa√ß√µes com hor√°rios de funcionamento e contato.

### üéì **Tutoriais**
- **Central de Ajuda Integrada:** Guias passo a passo com imagens que ensinam a usar todas as funcionalidades do sistema, desde a configura√ß√£o inicial at√© as opera√ß√µes mais avan√ßadas.

---

## üó∫Ô∏è Roadmap de Futuras Funcionalidades

Para continuar evoluindo o ChefOS, planejamos implementar novas funcionalidades focadas em aumentar a lucratividade, efici√™ncia e a experi√™ncia do cliente.

### üéØ Alta Prioridade (Foco em Core Business e Lucratividade)

*   **Melhorias na Integra√ß√£o de Delivery:**
    *   **Integra√ß√£o com outros Marketplaces:** Suporte para Rappi e outras plataformas de delivery.
    *   **Gest√£o de Entregadores:** Acompanhamento do status dos entregadores (pr√≥prios ou da plataforma).
    *   **Card√°pio Espec√≠fico para Delivery:** Gest√£o de pre√ßos e disponibilidade de itens para entrega.

*   **M√≥dulo de Relat√≥rios Avan√ßados:**
    *   **Dashboard de CMV vs. Vendas:** Acompanhamento da sa√∫de financeira em tempo real.

*   **Melhorias no PDV:**
    *   **Divis√£o de Conta por Item:** Permitir que clientes em uma mesma mesa paguem apenas o que consumiram.
    *   **Integra√ß√£o com Pagamento na Mesa:** Suporte para maquininhas de cart√£o que se comunicam com o sistema para fechar a conta na mesa.
    *   **Gest√£o de Combos e Modificadores:** Interface aprimorada para cria√ß√£o de ofertas "monte seu combo" e modificadores complexos.

### ‚≠ê M√©dia Prioridade (Melhorias de Efici√™ncia e Usabilidade)

*   **M√≥dulo de Estoque Avan√ßado:**
    *   **Controle de Desperd√≠cio:** Ferramenta para registrar perdas de insumos de forma detalhada (vencimento, quebra, etc.) para an√°lise de custos.

*   **Gest√£o de Vouchers e Cupons:**
    *   Cria√ß√£o e controle de cupons de desconto para uso no PDV.

*   **Melhorias no M√≥dulo de RH:**
    *   **Gest√£o de Documentos:** Armazenamento digital de contratos e documentos dos funcion√°rios.
    *   **Avalia√ß√µes de Desempenho:** Registro e acompanhamento de feedbacks e avalia√ß√µes peri√≥dicas.
    *   **Comunica√ß√£o Interna:** Mural de avisos e comunicados para a equipe.

*   **Melhorias no KDS:**
    *   **Suporte a "Bump Bar":** Permitir a finaliza√ß√£o de comandas com teclados f√≠sicos.
    *   **Consulta de Ficha T√©cnica:** Acesso r√°pido √† receita ou modo de preparo diretamente na tela da comanda.

### üí° Baixa Prioridade (Expans√£o e "Nice-to-haves")

*   **M√≥dulo de Multi-loja/Franquias:**
    *   **Gest√£o Centralizada:** Controle de card√°pio, funcion√°rios e relat√≥rios para m√∫ltiplas unidades.
    *   **Relat√≥rios Consolidados:** Vis√£o geral do desempenho de toda a rede.

*   **M√≥dulo de Eventos:**
    *   **Gest√£o de Reservas para Grupos:** Ferramenta para agendamento e organiza√ß√£o de eventos fechados.
    *   **Or√ßamentos e Card√°pios Personalizados:** Cria√ß√£o de pacotes e menus espec√≠ficos para eventos.

*   **M√≥dulo de Marketing:**
    *   **Campanhas de E-mail/SMS:** Envio de promo√ß√µes para a base de clientes cadastrados no CRM.

---

### üîå Integra√ß√£o via API Externa

O ChefOS oferece uma API externa para que sistemas de terceiros, como totens de autoatendimento ou aplicativos de delivery pr√≥prios, possam enviar pedidos diretamente para o sistema. Os pedidos entram na fila do KDS e do Caixa como qualquer outro pedido interno.

#### Autentica√ß√£o

A autentica√ß√£o √© feita atrav√©s de uma chave de API Bearer. Voc√™ pode gerar e encontrar sua chave em `Configura√ß√µes > Funcionalidades > API de Pedidos Externos`.

**Header:** `Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA`

---

#### `GET /api/external-order`

Use este endpoint para buscar o card√°pio dispon√≠vel de um restaurante.

**Query Parameters:**

*   `restaurantId` (obrigat√≥rio): O ID do seu usu√°rio no sistema ChefOS.

**Exemplo de Requisi√ß√£o:**

```
GET https://gastro.koresolucoes.com.br/api/external-order?restaurantId=SEU_USER_ID_AQUI
Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA
```

**Exemplo de Resposta (Sucesso 200 OK):**

```json
{
  "menu": [
    {
      "name": "Hamb√∫rguer Cl√°ssico",
      "description": "P√£o, carne, queijo e salada.",
      "price": 30.00,
      "external_code": "HB-CLASSICO"
    },
    {
      "name": "Refrigerante",
      "description": null,
      "price": 8.00,
      "external_code": "REFRI-LATA"
    }
  ]
}
```
**Importante:** Apenas itens com um **"C√≥digo Externo"** definido na Ficha T√©cnica ser√£o retornados.

---

#### `POST /api/external-order`

Use este endpoint para criar um novo pedido.

**Exemplo de Corpo da Requisi√ß√£o (JSON):**

```json
{
  "restaurantId": "SEU_USER_ID_AQUI",
  "tableNumber": 15,
  "orderTypeLabel": "Totem de Autoatendimento 1",
  "externalId": "pedido-totem-xyz-123",
  "customer": {
    "name": "Jo√£o Ningu√©m",
    "phone": "11987654321"
  },
  "items": [
    {
      "externalCode": "HB-CLASSICO",
      "quantity": 2,
      "notes": "Um sem picles, por favor."
    },
    {
      "externalCode": "REFRI-LATA",
      "quantity": 2,
      "price": 7.50
    }
  ]
}
```

**Campos do Corpo da Requisi√ß√£o:**

*   `restaurantId` (obrigat√≥rio): String. O ID do seu usu√°rio no sistema ChefOS.
*   `tableNumber` (obrigat√≥rio): N√∫mero. O n√∫mero da mesa para pedidos "Dine-in". Use `0` para vendas de balc√£o/retirada ("QuickSale").
*   `orderTypeLabel` (opcional): String. Um r√≥tulo para identificar a origem do pedido (ex: "Totem 1", "App de Entrega").
*   `externalId` (opcional): String. Um ID √∫nico do sistema de origem para refer√™ncia.
*   `customer` (opcional): Objeto. Dados do cliente. Se o nome j√° existir, o pedido ser√° associado ao cliente existente; caso contr√°rio, um novo cliente ser√° criado.
    *   `name` (obrigat√≥rio se `customer` for enviado): String.
    *   `phone` (opcional): String.
    *   `email` (opcional): String.
*   `items` (obrigat√≥rio): Array de objetos.
    *   `externalCode` (obrigat√≥rio): String. O c√≥digo do item, conforme retornado pela API do card√°pio (`GET`).
    *   `quantity` (obrigat√≥rio): N√∫mero.
    *   `notes` (opcional): String. Observa√ß√µes para a cozinha.
    *   `price` (opcional): N√∫mero. Permite sobreescrever o pre√ßo padr√£o do item para este pedido espec√≠fico.

**Exemplo de Resposta (Sucesso 201 Created):**

```json
{
  "success": true,
  "message": "Order created successfully and sent to KDS.",
  "orderId": "uuid-do-pedido-criado-no-chefos"
}
```

**Respostas de Erro:**

*   **400 Bad Request:** Erro de valida√ß√£o no corpo da requisi√ß√£o (ex: campos faltando).
*   **401 Unauthorized / 403 Forbidden:** Chave de API inv√°lida ou `restaurantId` incorreto.
*   **404 Not Found:** Um ou mais `externalCode` de itens n√£o foram encontrados no card√°pio.
*   **500 Internal Server Error:** Ocorreu um erro no servidor ao processar o pedido.

---

#### `PATCH /api/external-order`

Use este endpoint para adicionar itens a um pedido existente que esteja aberto.

**Corpo da Requisi√ß√£o (JSON):**

```json
{
  "restaurantId": "SEU_USER_ID_AQUI",
  "orderId": "uuid-do-pedido-aberto-no-chefos",
  "items": [
    {
      "externalCode": "HB-CLASSICO",
      "quantity": 1,
      "notes": "Extra bacon."
    },
    {
      "externalCode": "REFRI-LATA",
      "quantity": 1
    }
  ]
}
```

**Campos:**

*   `restaurantId` (obrigat√≥rio): String.
*   `orderId` (obrigat√≥rio): String. O `orderId` retornado pelo ChefOS ao criar o pedido.
*   `items` (obrigat√≥rio): Array de objetos, com a mesma estrutura do `POST`.

**Resposta (Sucesso 200 OK):**

```json
{
  "success": true,
  "message": "Items added to order successfully.",
  "orderId": "uuid-do-pedido-aberto-no-chefos"
}
```

---

### üîå API de Clientes

O ChefOS exp√µe uma API para gerenciamento de clientes, permitindo a integra√ß√£o com sistemas de fidelidade, CRMs ou aplicativos personalizados.

A autentica√ß√£o segue o mesmo padr√£o da API de pedidos, usando uma chave Bearer.

**Header:** `Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA`

---

#### `GET /api/clientes`

Use este endpoint para buscar clientes. Se nenhum par√¢metro de busca for fornecido, todos os clientes do restaurante ser√£o retornados.

**Query Parameters:**

*   `restaurantId` (obrigat√≥rio): O ID do seu usu√°rio no sistema ChefOS.
*   `search` (opcional): String de busca. Procura por nome, telefone, email ou CPF.
*   `id` (opcional): O UUID de um cliente espec√≠fico para buscar seus detalhes.

**Exemplo de Requisi√ß√£o (busca):**
```
GET https://gastro.koresolucoes.com.br/api/clientes?restaurantId=SEU_USER_ID&search=Jo√£o
Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA
```

**Exemplo de Resposta (busca, 200 OK):**
```json
[
  {
    "id": "uuid-do-cliente-123",
    "name": "Jo√£o Ningu√©m",
    "phone": "11987654321",
    "email": "joao@email.com",
    "cpf": "111.222.333-44",
    "notes": "Prefere mesa perto da janela.",
    "loyalty_points": 150,
    "user_id": "SEU_USER_ID_AQUI",
    "created_at": "..."
  }
]
```

**Exemplo de Requisi√ß√£o (por ID):**
```
GET https://gastro.koresolucoes.com.br/api/clientes?restaurantId=SEU_USER_ID&id=uuid-do-cliente-123
Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA
```
**Exemplo de Resposta (por ID, 200 OK):** Retorna um √∫nico objeto de cliente, como o do array acima.

---

#### `POST /api/clientes`

Use este endpoint para cadastrar um novo cliente.

**Corpo da Requisi√ß√£o (JSON):**
```json
{
  "restaurantId": "SEU_USER_ID_AQUI",
  "name": "Maria Nova",
  "phone": "21912345678",
  "email": "maria@email.com",
  "cpf": "444.555.666-77",
  "notes": "Cliente novo, primeira visita."
}
```

**Campos:**

*   `restaurantId` (obrigat√≥rio): String.
*   `name` (obrigat√≥rio): String.
*   `phone`, `email`, `cpf`, `notes` (opcionais): String.

**Resposta (Sucesso 201 Created):** Retorna o objeto do cliente rec√©m-criado.

---

#### `PATCH /api/clientes`

Use este endpoint para adicionar ou remover pontos de fidelidade de um cliente. Esta opera√ß√£o registra a movimenta√ß√£o no hist√≥rico do cliente.

**Query Parameters:**

*   `id` (obrigat√≥rio): O UUID do cliente a ser atualizado.

**Corpo da Requisi√ß√£o (JSON):**
```json
{
  "restaurantId": "SEU_USER_ID_AQUI",
  "loyalty_points_change": 50,
  "description": "B√¥nus por indica√ß√£o"
}
```
*Um valor negativo em `loyalty_points_change` remove pontos.*

**Campos:**

*   `restaurantId` (obrigat√≥rio): String.
*   `loyalty_points_change` (obrigat√≥rio): N√∫mero. A quantidade de pontos a adicionar (positivo) ou remover (negativo).
*   `description` (obrigat√≥rio): String. O motivo da movimenta√ß√£o (ex: "Ac√∫mulo por compra", "Resgate de pr√™mio").

**Resposta (Sucesso 200 OK):** Retorna o objeto completo e atualizado do cliente.

---

### üîå API de Reservas

A API de Reservas permite a integra√ß√£o com sistemas externos para consulta de disponibilidade e cria√ß√£o de novas reservas, como o "Reservar com o Google" ou o site do restaurante.

A autentica√ß√£o segue o mesmo padr√£o, usando uma chave Bearer.

**Header:** `Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA`

---

#### `GET /api/reservas`

Use este endpoint para consultar os hor√°rios dispon√≠veis.

**Query Parameters:**

*   `restaurantId` (obrigat√≥rio): O ID do seu usu√°rio no sistema ChefOS.
*   `action` (obrigat√≥rio): Deve ser `disponibilidade`.
*   `data` (obrigat√≥rio): A data desejada no formato `YYYY-MM-DD`.
*   `numero_pessoas` (obrigat√≥rio): A quantidade de pessoas para a reserva.

**Exemplo de Requisi√ß√£o:**
```
GET https://gastro.koresolucoes.com.br/api/reservas?restaurantId=SEU_USER_ID&action=disponibilidade&data=2024-10-26&numero_pessoas=4
Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA
```

**Exemplo de Resposta (Sucesso 200 OK):**
```json
{
  "availability": [
    "19:00",
    "19:30",
    "20:00",
    "21:00"
  ]
}
```
*A lista estar√° vazia se n√£o houver hor√°rios dispon√≠veis ou se o restaurante estiver fechado no dia.*

---

#### `POST /api/reservas`

Use este endpoint para criar uma nova reserva.

**Corpo da Requisi√ß√£o (JSON):**
```json
{
  "restaurantId": "SEU_USER_ID_AQUI",
  "customer_name": "Ana Silva",
  "customer_phone": "11987654321",
  "customer_email": "ana.silva@email.com",
  "party_size": 4,
  "reservation_time": "2024-10-26T19:30:00.000Z",
  "notes": "Prefer√™ncia por mesa na janela."
}
```

**Campos:**

*   `restaurantId` (obrigat√≥rio): String.
*   `customer_name` (obrigat√≥rio): String. Nome do cliente.
*   `party_size` (obrigat√≥rio): N√∫mero. Quantidade de pessoas.
*   `reservation_time` (obrigat√≥rio): String ISO 8601 (UTC). Data e hora exatas da reserva.
*   `customer_phone` (opcional): String.
*   `customer_email` (opcional): String.
*   `notes` (opcional): String.

**Resposta (Sucesso 201 Created):** Retorna o objeto completo da reserva rec√©m-criada, com status "PENDING".

```json
{
    "id": "uuid-da-reserva-criada",
    "user_id": "SEU_USER_ID_AQUI",
    "customer_name": "Ana Silva",
    "customer_email": "ana.silva@email.com",
    "customer_phone": "11987654321",
    "party_size": 4,
    "reservation_time": "2024-10-26T19:30:00+00:00",
    "notes": "Prefer√™ncia por mesa na janela.",
    "status": "PENDING",
    "created_at": "..."
}
```
*As reservas criadas via API ficam com status "Pendente" para que a equipe do restaurante possa confirm√°-las no painel do ChefOS.*

---

### üîå API de Card√°pio e Estoque

API aprimorada para consulta de card√°pio com disponibilidade em tempo real e gerenciamento de estoque.

A autentica√ß√£o segue o mesmo padr√£o, usando uma chave Bearer.

**Header:** `Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA`

---

#### `GET /api/cardapio-estoque`

Use este endpoint para buscar o card√°pio detalhado ou a lista de insumos.

**A√ß√£o Padr√£o (Card√°pio Detalhado):**

Retorna o card√°pio com um campo booleano `disponivel_estoque` que indica se h√° insumos suficientes para produzir o item.

**Query Parameters:**

*   `restaurantId` (obrigat√≥rio): O ID do seu usu√°rio no sistema ChefOS.

**Exemplo de Requisi√ß√£o:**
```
GET https://gastro.koresolucoes.com.br/api/cardapio-estoque?restaurantId=SEU_USER_ID_AQUI
Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA
```

**Exemplo de Resposta (Sucesso 200 OK):**
```json
[
    {
        "id": "uuid-da-receita",
        "name": "Hamb√∫rguer Cl√°ssico",
        "description": "P√£o, carne, queijo e salada.",
        "price": 30.00,
        "external_code": "HB-CLASSICO",
        "image_url": "...",
        "category_name": "Lanches",
        "disponivel_estoque": true
    },
    {
        "id": "uuid-da-receita-2",
        "name": "Pizza Especial",
        "description": "Molho, queijo, e ingredientes especiais.",
        "price": 65.00,
        "external_code": "PZ-ESPECIAL",
        "image_url": null,
        "category_name": "Pizzas",
        "disponivel_estoque": false
    }
]
```

**A√ß√£o `insumos` (Lista de Insumos):**

Retorna a lista de ingredientes do estoque.

**Query Parameters:**

*   `restaurantId` (obrigat√≥rio): O ID do seu usu√°rio.
*   `action` (obrigat√≥rio): `insumos`.
*   `status` (opcional): `estoque_baixo` para filtrar apenas itens com estoque abaixo do m√≠nimo.

**Exemplo de Requisi√ß√£o:**
```
GET https://gastro.koresolucoes.com.br/api/cardapio-estoque?restaurantId=SEU_USER_ID&action=insumos&status=estoque_baixo
Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA
```

**Exemplo de Resposta (Sucesso 200 OK):**
```json
[
  {
    "id": "uuid-do-ingrediente",
    "name": "Carne de Hamb√∫rguer",
    "stock": 500,
    "min_stock": 1000,
    "unit": "g",
    "cost": 0.05
  }
]
```
---

#### `PUT /api/cardapio-estoque`

Use este endpoint para alterar a disponibilidade manual de um item no card√°pio (dispon√≠vel/indispon√≠vel).

**Query Parameters:**

*   `restaurantId` (obrigat√≥rio): O ID do seu usu√°rio.
*   `external_code` (obrigat√≥rio): O c√≥digo externo do item a ser atualizado.

**Corpo da Requisi√ß√£o (JSON):**
```json
{
  "is_available": false
}
```

**Campos:**
* `is_available` (obrigat√≥rio): Booleano. `true` para tornar o item dispon√≠vel, `false` para indispon√≠vel.

**Resposta (Sucesso 200 OK):** Retorna o objeto completo e atualizado da receita.

---

### üîå API de Relat√≥rios e Performance

A API de Relat√≥rios permite que sistemas externos, como softwares de contabilidade ou ferramentas de BI (Business Intelligence), consumam dados de performance do restaurante.

A autentica√ß√£o segue o mesmo padr√£o, usando uma chave Bearer.

**Header:** `Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA`

---

#### `GET /api/relatorios`

Use este endpoint para obter dados de performance. Voc√™ deve especificar a a√ß√£o desejada (`vendas` ou `performance_itens`) e o per√≠odo.

**Query Parameters:**

*   `restaurantId` (obrigat√≥rio): O ID do seu usu√°rio no sistema ChefOS.
*   `action` (obrigat√≥rio): O tipo de relat√≥rio. Valores poss√≠veis: `vendas`, `performance_itens`.
*   `data_inicio` (obrigat√≥rio): A data de in√≠cio do per√≠odo no formato `YYYY-MM-DD`.
*   `data_fim` (obrigat√≥rio): A data de fim do per√≠odo no formato `YYYY-MM-DD`.

**Exemplo de Requisi√ß√£o (Resumo de Vendas):**
```
GET https://gastro.koresolucoes.com.br/api/relatorios?restaurantId=SEU_USER_ID&action=vendas&data_inicio=2024-08-01&data_fim=2024-08-31
Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA
```

**Exemplo de Resposta (action=vendas, 200 OK):**
```json
{
  "faturamento_bruto": 15230.50,
  "custo_total_cmv": 4890.15,
  "lucro_bruto": 10340.35,
  "total_pedidos": 450,
  "ticket_medio": 33.84
}
```

**Exemplo de Requisi√ß√£o (Performance de Itens):**
```
GET https://gastro.koresolucoes.com.br/api/relatorios?restaurantId=SEU_USER_ID&action=performance_itens&data_inicio=2024-08-01&data_fim=2024-08-31
Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA
```

**Exemplo de Resposta (action=performance_itens, 200 OK):**
```json
[
  {
    "nome_item": "Hamb√∫rguer Cl√°ssico",
    "quantidade_vendida": 250,
    "receita_total": 7500,
    "custo_total": 2125,
    "lucro_total": 5375,
    "margem_lucro_percentual": 71.66
  },
  {
    "nome_item": "Pizza Margherita",
    "quantidade_vendida": 80,
    "receita_total": 4000,
    "custo_total": 1200,
    "lucro_total": 2800,
    "margem_lucro_percentual": 70
  }
]
```

---

### üîå API de Conta

A API de Conta permite que sistemas externos interajam com o status de pagamento de uma mesa.

A autentica√ß√£o segue o mesmo padr√£o, usando uma chave Bearer.

**Header:** `Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA`

---

#### `GET /api/account`

Use este endpoint para obter um resumo completo do pedido aberto de uma mesa. Isso √© ideal para que um cliente possa visualizar sua conta em um totem ou aplicativo antes de solicitar o fechamento.

**Query Parameters:**

*   `restaurantId` (obrigat√≥rio): O ID do seu usu√°rio no sistema ChefOS.
*   `tableNumber` (obrigat√≥rio): O n√∫mero da mesa para a qual o resumo da conta est√° sendo solicitado.

**Exemplo de Requisi√ß√£o:**
```
GET https://gastro.koresolucoes.com.br/api/account?restaurantId=SEU_USER_ID_AQUI&tableNumber=15
Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA
```

**Exemplo de Resposta (Sucesso 200 OK):**
```json
{
  "orderId": "uuid-do-pedido-aberto",
  "tableNumber": 15,
  "customer": {
    "name": "Jo√£o Ningu√©m",
    "phone": "11987654321"
  },
  "items": [
    {
      "name": "Hamb√∫rguer Cl√°ssico",
      "quantity": 2,
      "price": 30.00,
      "total": 60.00,
      "notes": "Um sem picles, por favor."
    },
    {
      "name": "Refrigerante",
      "quantity": 2,
      "price": 8.00,
      "total": 16.00,
      "notes": null
    }
  ],
  "summary": {
    "subtotal": 76.00,
    "serviceFee": 7.60,
    "total": 83.60
  }
}
```
*Se nenhum cliente estiver associado √† mesa, o campo `customer` ser√° `null`.*

**Respostas de Erro:**

*   **404 Not Found:** Nenhuma ordem aberta encontrada para a mesa especificada.

---

#### `POST /api/account`

Use este endpoint para solicitar que uma mesa seja movida para o status de pagamento. Isso far√° com que a mesa apare√ßa na fila do Caixa.

**Corpo da Requisi√ß√£o (JSON):**
```json
{
  "restaurantId": "SEU_USER_ID_AQUI",
  "tableNumber": 15
}
```

**Campos:**

*   `restaurantId` (obrigat√≥rio): String. O ID do seu usu√°rio no sistema ChefOS.
*   `tableNumber` (obrigat√≥rio): N√∫mero. O n√∫mero da mesa para a qual a conta est√° sendo solicitada.

**Exemplo de Resposta (Sucesso 200 OK):**
```json
{
  "success": true,
  "message": "Table #15 status updated to 'PAGANDO'."
}
```

**Respostas de Erro:**

*   **400 Bad Request:** A mesa n√£o est√° no status "OCUPADA" ou faltam campos na requisi√ß√£o.
*   **401 Unauthorized / 403 Forbidden:** Chave de API inv√°lida ou `restaurantId` incorreto.
*   **404 Not Found:** A `tableNumber` especificada n√£o foi encontrada.
*   **500 Internal Server Error:** Ocorreu um erro no servidor.

---

### üîå API de Fidelidade (Recompensas)

A API de Recompensas permite que um sistema externo gerencie os pr√™mios do programa de fidelidade.

A autentica√ß√£o segue o mesmo padr√£o, usando uma chave Bearer.

**Header:** `Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA`
---
#### `GET /api/recompensas`

Use este endpoint para listar todas as recompensas de fidelidade ativas para um restaurante.

**Query Parameters:**

*   `restaurantId` (obrigat√≥rio): O ID do seu usu√°rio no sistema ChefOS.

**Exemplo de Requisi√ß√£o:**
```
GET https://gastro.koresolucoes.com.br/api/recompensas?restaurantId=SEU_USER_ID_AQUI
Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA
```

**Exemplo de Resposta (Sucesso 200 OK):**
```json
[
  {
    "id": "uuid-da-recompensa-1",
    "name": "Refrigerante Gr√°tis",
    "description": "Troque seus pontos por um refrigerante lata.",
    "points_cost": 50,
    "type": "free_item",
    "value": "REFRI-LATA"
  },
  {
    "id": "uuid-da-recompensa-2",
    "name": "R$10 de Desconto",
    "description": "Use seus pontos para ganhar R$10 de desconto na sua compra.",
    "points_cost": 100,
    "type": "discount_fixed",
    "value": "10.00"
  }
]
```
**Campos da Resposta:**

*   `id`: O UUID da recompensa.
*   `name`: O nome do pr√™mio.
*   `points_cost`: Quantidade de pontos necess√°rios.
*   `type`: O tipo de recompensa (`free_item`, `discount_fixed`, `discount_percentage`).
*   `value`: O valor da recompensa. Para `free_item`, √© o `external_code` do produto. Para descontos, √© o valor num√©rico.

---
#### `POST /api/recompensas`

Use este endpoint para criar uma nova recompensa de fidelidade.

**Corpo da Requisi√ß√£o (JSON):**
```json
{
  "restaurantId": "SEU_USER_ID_AQUI",
  "name": "Sobremesa Gr√°tis",
  "description": "Qualquer sobremesa da casa por 120 pontos.",
  "points_cost": 120,
  "reward_type": "free_item",
  "reward_value": "SKU-DA-SOBREMESA",
  "is_active": true
}
```

**Campos:**
*   `restaurantId` (obrigat√≥rio): String.
*   `name` (obrigat√≥rio): String. Nome do pr√™mio.
*   `description` (opcional): String.
*   `points_cost` (obrigat√≥rio): N√∫mero. Custo em pontos.
*   `reward_type` (obrigat√≥rio): String. Tipo (`free_item`, `discount_fixed`, `discount_percentage`).
*   `reward_value` (obrigat√≥rio): String. Para `free_item`, deve ser o **`external_code`** de um item do card√°pio. Para os outros, o valor do desconto.
*   `is_active` (opcional): Booleano. Padr√£o √© `true`.

**Resposta (Sucesso 201 Created):** Retorna o objeto completo da recompensa rec√©m-criada.

---
#### `PATCH /api/recompensas`

Use este endpoint para atualizar uma recompensa existente.

**Query Parameters:**
*   `id` (obrigat√≥rio): O UUID da recompensa a ser atualizada.

**Corpo da Requisi√ß√£o (JSON):**
```json
{
  "restaurantId": "SEU_USER_ID_AQUI",
  "points_cost": 150,
  "is_active": false
}
```

**Campos:**
*   `restaurantId` (obrigat√≥rio): String.
*   Todos os campos do `POST` s√£o **opcionais** e podem ser enviados para atualiza√ß√£o.

**Resposta (Sucesso 200 OK):** Retorna o objeto completo e atualizado da recompensa.

---

### üîå API de Pagamentos

A API de Pagamentos permite que um sistema externo (como um totem de autoatendimento) registre pagamentos e finalize um pedido.

A autentica√ß√£o segue o mesmo padr√£o, usando uma chave Bearer.

**Header:** `Authorization: Bearer SUA_CHAVE_DE_API_EXTERNA`
---
#### `POST /api/payments`

Use este endpoint para registrar um ou mais pagamentos para um pedido aberto e finaliz√°-lo.

**Corpo da Requisi√ß√£o (JSON):**
```json
{
  "restaurantId": "SEU_USER_ID_AQUI",
  "orderId": "uuid-do-pedido-aberto-no-chefos",
  "payments": [
    { "method": "Cart√£o de Cr√©dito", "amount": 50.00 },
    { "method": "PIX", "amount": 33.60 }
  ]
}
```

**Campos:**

*   `restaurantId` (obrigat√≥rio): String.
*   `orderId` (obrigat√≥rio): String. O `orderId` do pedido aberto no ChefOS.
*   `payments` (obrigat√≥rio): Array de objetos de pagamento.
    *   `method` (obrigat√≥rio): String. A forma de pagamento (ex: "Cart√£o de Cr√©dito", "Dinheiro", "PIX").
    *   `amount` (obrigat√≥rio): N√∫mero. O valor pago neste m√©todo.

*A soma dos valores em `payments` deve ser maior ou igual ao total do pedido.*

**Resposta (Sucesso 200 OK):**
```json
{
  "success": true,
  "message": "Payment processed and order completed successfully."
}
```

**Respostas de Erro:**

*   **400 Bad Request:** Requisi√ß√£o inv√°lida ou a soma dos pagamentos √© insuficiente.
*   **404 Not Found:** O `orderId` n√£o foi encontrado ou n√£o est√° mais aberto.
*   **500 Internal Server Error:** Ocorreu um erro interno ao processar o pagamento.

---

### üîå API de Recursos Humanos (RH)

A API de RH oferece um conjunto completo de endpoints para integrar sistemas externos de gest√£o de pessoal, controle de ponto e contabilidade.

**Base da API:** `/api/rh`

A autentica√ß√£o segue o mesmo padr√£o das outras APIs, usando uma chave Bearer e o `restaurantId`.

---

#### **Recurso: Funcion√°rios (`/api/rh/funcionarios`)**

Gerencia a informa√ß√£o b√°sica dos funcion√°rios.

*   **`GET /`**
    *   **A√ß√£o:** Lista todos os funcion√°rios ativos.
    *   **Resposta (200 OK):** Array de objetos de funcion√°rio.

*   **`POST /`**
    *   **A√ß√£o:** Cria um novo funcion√°rio.
    *   **Corpo (JSON):** Objeto com os dados do funcion√°rio (nome, cargo, PIN, etc.).
    *   **Resposta (201 Created):** O objeto do funcion√°rio rec√©m-criado.

*   **`GET /{id}`**
    *   **A√ß√£o:** Obt√©m os detalhes de um funcion√°rio espec√≠fico, incluindo um resumo de desempenho.
    *   **Resposta (200 OK):** Objeto completo do funcion√°rio.

*   **`PATCH /{id}`**
    *   **A√ß√£o:** Atualiza a informa√ß√£o de um funcion√°rio.
    *   **Corpo (JSON):** Objeto com os campos a serem atualizados.
    *   **Resposta (200 OK):** O objeto do funcion√°rio atualizado.

*   **`DELETE /{id}`**
    *   **A√ß√£o:** Desativa (ou remove) um funcion√°rio do sistema.
    *   **Resposta (204 No Content):** Nenhuma resposta.

---

#### **Recurso: Cargos e Permiss√µes (`/api/rh/cargos`)**

Gerencia os cargos e o que cada um pode acessar.

*   **`GET /`**
    *   **A√ß√£o:** Lista todos os cargos (roles).
    *   **Resposta (200 OK):** Array de objetos `Role`.

*   **`GET /{id}/permissoes`**
    *   **A√ß√£o:** Lista as permiss√µes de um cargo espec√≠fico.
    *   **Resposta (200 OK):** Array de strings com as chaves de permiss√£o (ex: `["/pos", "/kds"]`).

*   **`PUT /{id}/permissoes`**
    *   **A√ß√£o:** Define (sobrescreve) a lista completa de permiss√µes para um cargo.
    *   **Corpo (JSON):** `{ "permissions": ["/pos", "/cashier"] }`
    *   **Resposta (200 OK):** Sucesso.

*   **`GET /permissoes-disponiveis`**
    *   **A√ß√£o:** Endpoint de ajuda que lista todas as chaves de permiss√£o poss√≠veis no sistema.
    *   **Resposta (200 OK):** `["/dashboard", "/pos", "/kds", ...]`

---

#### **Recurso: Controle de Ponto (`/api/rh/ponto`)**

Ideal para integra√ß√£o com sistemas de rel√≥gio de ponto biom√©tricos ou totens.

*   **`GET /`**
    *   **A√ß√£o:** Obt√©m os registros de ponto (`TimeClockEntry`) para um per√≠odo.
    *   **Query Params:** `data_inicio=YYYY-MM-DD`, `data_fim=YYYY-MM-DD`, `employeeId=...`
    *   **Resposta (200 OK):** Array de `TimeClockEntry`.

*   **`POST /bater-ponto`**
    *   **A√ß√£o:** Simula um funcion√°rio batendo o ponto (entrada/sa√≠da/pausa) usando seu PIN.
    *   **Corpo (JSON):** `{ "pin": "1234" }`
    *   **L√≥gica:** O sistema identifica o funcion√°rio pelo PIN e seu estado atual (se est√° em turno, em pausa, etc.) e registra a a√ß√£o apropriada (in√≠cio de turno, in√≠cio de pausa, fim de pausa ou fim de turno).
    *   **Resposta (200 OK):** `{ "status": "TURNO_INICIADO", "employeeName": "Ana Gerente" }`

*   **`POST /` (Ajuste Manual)**
    *   **A√ß√£o:** Adiciona um registro de ponto manualmente (para corre√ß√µes).
    *   **Corpo (JSON):** `{ "employee_id": "...", "clock_in_time": "...", "clock_out_time": "..." }`
    *   **Resposta (201 Created):** O novo registro criado.

*   **`PATCH /{id}` (Ajuste Manual)**
    *   **A√ß√£o:** Corrige um registro de ponto existente.
    *   **Resposta (200 OK):** O registro atualizado.

---

#### **Recurso: Escalas (`/api/rh/escalas`)**

Permite a consulta e publica√ß√£o de escalas de trabalho.

*   **`GET /`**
    *   **A√ß√£o:** Obt√©m as escalas (`Schedule`) e seus turnos (`Shift`) para um per√≠odo.
    *   **Query Params:** `data_inicio=YYYY-MM-DD`, `data_fim=YYYY-MM-DD`
    *   **Resposta (200 OK):** Array de `Schedule` com seus `Shifts` aninhados.

*   **`POST /{id}/publicar`**
    *   **A√ß√£o:** Publica uma escala (torna `is_published = true`), tornando-a vis√≠vel para os funcion√°rios.
    *   **Resposta (200 OK):** Sucesso.

---

#### **Recurso: Folha de Pagamento (`/api/rh/folha-pagamento`)**

Endpoint de apenas leitura para integra√ß√£o com softwares de contabilidade.

*   **`GET /resumo`**
    *   **A√ß√£o:** Gera um resumo da pr√©via da folha de pagamento para um per√≠odo.
    *   **Query Params:** `mes=MM`, `ano=YYYY`
    *   **L√≥gica:** Replica os c√°lculos do componente de Folha de Pagamento, considerando horas trabalhadas, horas extras (acima de 9h/dia e 44h/semana), sal√°rio base e multiplicador de hora extra.
    *   **Resposta (200 OK):** Um JSON detalhado com totais e dados por funcion√°rio.

    ```json
    {
      "periodo": "Setembro/2024",
      "totais": {
        "total_a_pagar": 12500.50,
        "total_horas_extras": 80.5,
        "total_horas_trabalhadas": 750.0
      },
      "funcionarios": [
        {
          "employeeId": "uuid-do-funcionario",
          "name": "Ana Gerente",
          "cargo": "Gerente",
          "horas_agendadas": 160,
          "horas_trabalhadas": 170.5,
          "horas_extras": 10.5,
          "salario_base": 3000.00,
          "valor_horas_extras": 500.75,
          "total_a_pagar": 3500.75
        }
      ]
    }
    ```

---

## üõ†Ô∏è Tecnologias Utilizadas

Este projeto foi constru√≠do com uma stack moderna e perform√°tica:

- **Frontend:** **Angular v20+**
  - **Standalone Components:** Arquitetura 100% baseada em componentes independentes, sem NgModules.
  - **Signals:** Gerenciamento de estado reativo, perform√°tico e intuitivo.
  - **Zoneless Change Detection:** Performance m√°xima ao eliminar a necessidade do Zone.js.
- **Backend & Database:** **Supabase**
  - **PostgreSQL:** Banco de dados relacional robusto.
  - **Authentication:** Gerenciamento de usu√°rios seguro.
  - **Realtime Subscriptions:** Sincroniza√ß√£o de dados em tempo real entre todos os clientes conectados.
- **Intelig√™ncia Artificial:** **Google Gemini API**
  - Utilizada para as funcionalidades de gera√ß√£o de fichas t√©cnicas e previs√£o de estoque.
- **UI / Styling:** **Tailwind CSS**
  - Framework CSS utility-first para uma prototipagem r√°pida e um design consistente.
- **Linguagem:** **TypeScript**
  - Tipagem est√°tica para um c√≥digo mais seguro e manuten√°vel.

---

## üìÅ Estrutura do Projeto

` ``
/src
|-- /app.component.*         # Componente Raiz
|-- /app.routes.ts           # Defini√ß√£o das rotas
|-- /components/             # M√≥dulos e componentes da aplica√ß√£o
|   |-- /auth/               # Login, sele√ß√£o de funcion√°rio
|   |-- /cashier/            # Tela do Caixa
|   |-- /dashboard/          # Tela do Dashboard
|   |-- /employees/          # Gest√£o de Funcion√°rios
|   |-- /inventory/          # Tela de Estoque
|   |-- /kds/                # Tela do KDS
|   |-- /leave-management/   # Gest√£o de aus√™ncias (Gerente)
|   |-- /menu/               # Card√°pio online (interno)
|   |-- /mise-en-place/      # Planejamento de produ√ß√£o
|   |-- /my-leave/           # Solicita√ß√£o de aus√™ncia (Funcion√°rio)
|   |-- /payroll/            # Folha de Pagamento
|   |-- /performance/        # An√°lise de desempenho
|   |-- /pos/                # Ponto de Venda
|   |-- /public-booking/     # P√°gina p√∫blica de reservas
|   |-- /purchasing/         # Gest√£o de compras
|   |-- /reports/            # Gera√ß√£o de relat√≥rios
|   |-- /reservations/       # Gest√£o interna de reservas
|   |-- /schedules/          # Gest√£o de escalas
|   |-- /settings/           # Configura√ß√µes gerais
|   |-- /technical-sheets/   # Fichas t√©cnicas
|   |-- /time-clock/         # Controle de ponto
|   |-- /tutorials/          # Central de ajuda
|   |-- /shared/             # Componentes compartilhados (modais, etc.)
|-- /config/                 # Arquivos de configura√ß√£o (environment)
|-- /guards/                 # Guards de autentica√ß√£o e permiss√£o
|-- /models/                 # Interfaces e tipos (TypeScript)
|-- /services/               # L√≥gica de neg√≥cio e comunica√ß√£o com APIs
|   |-- auth.service.ts      # Autentica√ß√£o principal
|   |-- supabase-state.service.ts # Gerenciamento de estado e Realtime
|   |-- ai-recipe.service.ts # Integra√ß√£o com Gemini API
|   |-- ... e outros
` ``

---

## üìÑ Licen√ßa

Este projeto √© distribu√≠do sob a licen√ßa MIT. Veja o arquivo `LICENSE` para mais detalhes.